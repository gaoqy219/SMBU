<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第9课词汇练习</title>
    <style>
        /* 保持原有样式不变，新增拖拽相关样式 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", sans-serif;
        }
        body {
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
            line-height: 1.8;
            color: #333;
            font-size: 16px;
        }
        h1 {
            text-align: center;
            margin: 20px 0 30px;
            color: #2c3e50;
        }
        h2 {
            margin: 30px 0 15px;
            color: #2c3e50;
            border-bottom: 2px solid #e74c3c;
            padding-bottom: 5px;
        }
        .font-control {
            text-align: center;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 8px;
        }
        .font-control button {
            padding: 8px 16px;
            margin: 0 8px;
            border: 1px solid #e74c3c;
            border-radius: 4px;
            background: #fff;
            color: #e74c3c;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
        }
        .font-control button:hover {
            background: #e74c3c;
            color: #fff;
        }
        .exercise {
            margin-bottom: 40px;
            padding: 20px;
            border: 1px solid #eee;
            border-radius: 8px;
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .question-group {
            margin-bottom: 25px;
        }
        .question {
            margin: 15px 0;
            padding-left: 10px;
            position: relative;
        }
        .question::before {
            content: "";
            position: absolute;
            left: 0;
            top: 8px;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background-color: #e74c3c;
        }
        .submit-btn {
            display: block;
            margin: 30px auto;
            padding: 10px 20px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .submit-btn:hover {
            background-color: #c0392b;
            transform: translateY(-2px);
        }
        .result {
            margin-top: 30px;
            padding: 20px;
            border-radius: 8px;
            background-color: #f8f8f8;
            display: none;
        }
        .score {
            text-align: center;
            font-size: 24px;
            margin-bottom: 20px;
            color: #2c3e50;
            font-weight: bold;
        }
        .answer-details {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px dashed #ccc;
        }
        .correct {
            color: #27ae60;
        }
        .incorrect {
            color: #e74c3c;
        }
        .explanation {
            margin-left: 20px;
            color: #7f8c8d;
            font-style: italic;
        }
        
        /* 连线题（拖拽）样式 */
        .matching-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin: 20px 0;
            gap: 20px;
        }
        .matching-column {
            flex: 1;
            min-width: 300px;
        }
        .drag-item {
            padding: 10px;
            margin: 5px 0;
            background-color: #f1f1f1;
            border-radius: 4px;
            cursor: grab;
            transition: all 0.2s;
            user-select: none;
        }
        .drag-item:active {
            cursor: grabbing;
        }
        .drag-item:hover {
            background-color: #e0e0e0;
        }
        .drag-item.dragging {
            opacity: 0.7;
            transform: scale(0.98);
        }
        .drop-zone {
            padding: 10px;
            margin: 5px 0;
            border: 2px dashed #ccc;
            border-radius: 4px;
            min-height: 70px;
            transition: all 0.3s;
        }
        .drop-zone.highlight {
            border-color: #3498db;
            background-color: #f0f7ff;
        }
        .drop-zone.filled {
            border-style: solid;
            border-color: #ddd;
        }
        .russian-translation {
            color: #555;
            font-size: 0.9em;
            margin-top: 5px;
            padding-left: 10px;
        }
        
        /* 填空题样式 */
        .blank {
            display: inline-block;
            width: 120px;
            height: 34px;
            border-bottom: 2px solid #3498db;
            margin: 0 5px;
            position: relative;
        }
        .blank select {
            width: 100%;
            height: 100%;
            border: none;
            background: transparent;
            font-size: 16px;
            padding: 0 5px;
            color: #333;
        }
        .blank select:focus {
            outline: none;
        }
        
        /* 短文填空样式 */
        .passage {
            line-height: 2;
            margin: 20px 0;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>第9课词汇练习</h1>
    
    <div class="font-control">
        <button id="font-smaller">减小字体</button>
        <button id="font-default">默认字体</button>
        <button id="font-larger">增大字体</button>
    </div>
    
    <!-- 一、词义拖拽匹配题 -->
    <div class="exercise">
        <h2>一、词义匹配：将左侧中文词汇拖拽到右侧对应的英文解释处</h2>
        <p>操作提示：按住左侧中文词汇，拖拽到右侧对应的英文解释区域后松开</p>
        
        <div class="matching-container">
            <div class="matching-column" id="chinese-vocab-container">
                <h3>中文词汇（可拖拽）</h3>
                <!-- 中文词汇将通过JavaScript动态生成并打乱顺序 -->
            </div>
            
            <div class="matching-column">
                <h3>英文解释（附俄语翻译）</h3>
                <div class="drop-zone" data-answer="1">
                    A. lawyer; attorney
                    <div class="russian-translation">русский: адвокат; поверенный</div>
                </div>
                <div class="drop-zone" data-answer="2">
                    B. outstanding; prominent
                    <div class="russian-translation">русский: выдающийся; известный</div>
                </div>
                <div class="drop-zone" data-answer="3">
                    C. wish; aspiration
                    <div class="russian-translation">русский: желание; стремление</div>
                </div>
                <div class="drop-zone" data-answer="4">
                    D. authentic; genuine
                    <div class="russian-translation">русский: подлинный; настоящий</div>
                </div>
                <div class="drop-zone" data-answer="5">
                    E. deserted
                    <div class="russian-translation">русский: заброшенный</div>
                </div>
                <div class="drop-zone" data-answer="6">
                    F. completely exhausted
                    <div class="russian-translation">русский: полностью измотанный</div>
                </div>
                <div class="drop-zone" data-answer="7">
                    G. bear; endure
                    <div class="russian-translation">русский: переносить; терпеть</div>
                </div>
                <div class="drop-zone" data-answer="8">
                    H. try; attempt
                    <div class="russian-translation">русский: пытаться; предпринимать</div>
                </div>
                <div class="drop-zone" data-answer="9">
                    I. national-level
                    <div class="russian-translation">русский: национального уровня</div>
                </div>
                <div class="drop-zone" data-answer="10">
                    J. tourist attraction
                    <div class="russian-translation">русский: туристическое место интереса</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 二、句子填空题 -->
    <div class="exercise">
        <h2>二、句子填空：选择合适词汇填空</h2>
        <p>请从下拉菜单中选择最合适的词语填入句子空白处</p>
        <p>可选词汇：细心、关怀、奇迹、坚决、负责、口语、操练、准确、发音、提醒</p>
        
        <div class="question-group">
            <div class="question">1. 做实验时必须<span class="blank">
                <select class="sentence-blank" data-question="1">
                    <option value="">--请选择--</option>
                    <!-- 选项将通过JavaScript动态生成并打乱顺序 -->
                </select>
            </span>，不能放过任何一个细节。</div>
            
            <div class="question">2. 老师的<span class="blank">
                <select class="sentence-blank" data-question="2">
                    <option value="">--请选择--</option>
                    <!-- 选项将通过JavaScript动态生成并打乱顺序 -->
                </select>
            </span>让离家的学生感受到了温暖。</div>
            
            <div class="question">3. 植物在沙漠中存活，简直是一个<span class="blank">
                <select class="sentence-blank" data-question="3">
                    <option value="">--请选择--</option>
                    <!-- 选项将通过JavaScript动态生成并打乱顺序 -->
                </select>
            </span>。</div>
            
            <div class="question">4. 他<span class="blank">
                <select class="sentence-blank" data-question="4">
                    <option value="">--请选择--</option>
                    <!-- 选项将通过JavaScript动态生成并打乱顺序 -->
                </select>
            </span>反对这种不公正的做法，从不妥协。</div>
            
            <div class="question">5. 这个项目由他<span class="blank">
                <select class="sentence-blank" data-question="5">
                    <option value="">--请选择--</option>
                    <!-- 选项将通过JavaScript动态生成并打乱顺序 -->
                </select>
            </span>，出了问题他会承担责任。</div>
            
            <div class="question">6. 学习外语时，<span class="blank">
                <select class="sentence-blank" data-question="6">
                    <option value="">--请选择--</option>
                    <!-- 选项将通过JavaScript动态生成并打乱顺序 -->
                </select>
            </span>练习和书面练习同样重要。</div>
            
            <div class="question">7. 运动员每天<span class="blank">
                <select class="sentence-blank" data-question="7">
                    <option value="">--请选择--</option>
                    <!-- 选项将通过JavaScript动态生成并打乱顺序 -->
                </select>
            </span>技能，只为在比赛中发挥最佳水平。</div>
            
            <div class="question">8. 请确保你的回答<span class="blank">
                <select class="sentence-blank" data-question="8">
                    <option value="">--请选择--</option>
                    <!-- 选项将通过JavaScript动态生成并打乱顺序 -->
                </select>
            </span>，不要有任何错误。</div>
            
            <div class="question">9. 他的中文<span class="blank">
                <select class="sentence-blank" data-question="9">
                    <option value="">--请选择--</option>
                    <!-- 选项将通过JavaScript动态生成并打乱顺序 -->
                </select>
            </span>很标准，几乎听不出是外国人。</div>
            
            <div class="question">10. 妈妈总会<span class="blank">
                <select class="sentence-blank" data-question="10">
                    <option value="">--请选择--</option>
                    <!-- 选项将通过JavaScript动态生成并打乱顺序 -->
                </select>
            </span>我带好钥匙，免得回家时进不了门。</div>
        </div>
    </div>
    
    <!-- 三、短文填空题 -->
    <div class="exercise">
        <h2>三、短文填空：在短文中选择合适词汇填空</h2>
        <p>请从下拉菜单中选择最合适的词语填入短文中的空白处</p>
        <p>可选词汇：维持、竟然、追赶、打量、损坏、头皮、脱落、吸收、位于、特色</p>
        
        <div class="passage">
            老张经营着一家<span class="blank">
                <select class="passage-blank" data-question="1">
                    <option value="">--请选择--</option>
                    <option value="维持">维持</option>
                    <option value="竟然">竟然</option>
                    <option value="追赶">追赶</option>
                    <option value="打量">打量</option>
                    <option value="损坏">损坏</option>
                    <option value="头皮">头皮</option>
                    <option value="脱落">脱落</option>
                    <option value="吸收">吸收</option>
                    <option value="位于">位于</option>
                    <option value="特色">特色</option>
                </select>
            </span>在巷口的小面馆，他家的面条因独特的口味成了当地的<span class="blank">
                <select class="passage-blank" data-question="2">
                    <option value="">--请选择--</option>
                    <option value="维持">维持</option>
                    <option value="竟然">竟然</option>
                    <option value="追赶">追赶</option>
                    <option value="打量">打量</option>
                    <option value="损坏">损坏</option>
                    <option value="头皮">头皮</option>
                    <option value="脱落">脱落</option>
                    <option value="吸收">吸收</option>
                    <option value="位于">位于</option>
                    <option value="特色">特色</option>
                </select>
            </span>。每天清晨，他都要检查食材，生怕有一点<span class="blank">
                <select class="passage-blank" data-question="3">
                    <option value="">--请选择--</option>
                    <option value="维持">维持</option>
                    <option value="竟然">竟然</option>
                    <option value="追赶">追赶</option>
                    <option value="打量">打量</option>
                    <option value="损坏">损坏</option>
                    <option value="头皮">头皮</option>
                    <option value="脱落">脱落</option>
                    <option value="吸收">吸收</option>
                    <option value="位于">位于</option>
                    <option value="特色">特色</option>
                </select>
            </span>影响口感。<br><br>
            
            这天，一位顾客吃完面后<span class="blank">
                <select class="passage-blank" data-question="4">
                    <option value="">--请选择--</option>
                    <option value="维持">维持</option>
                    <option value="竟然">竟然</option>
                    <option value="追赶">追赶</option>
                    <option value="打量">打量</option>
                    <option value="损坏">损坏</option>
                    <option value="头皮">头皮</option>
                    <option value="脱落">脱落</option>
                    <option value="吸收">吸收</option>
                    <option value="位于">位于</option>
                    <option value="特色">特色</option>
                </select>
            </span>没付钱就走了。老张愣了一下，立刻起身<span class="blank">
                <select class="passage-blank" data-question="5">
                    <option value="">--请选择--</option>
                    <option value="维持">维持</option>
                    <option value="竟然">竟然</option>
                    <option value="追赶">追赶</option>
                    <option value="打量">打量</option>
                    <option value="损坏">损坏</option>
                    <option value="头皮">头皮</option>
                    <option value="脱落">脱落</option>
                    <option value="吸收">吸收</option>
                    <option value="位于">位于</option>
                    <option value="特色">特色</option>
                </select>
            </span>。追上后，对方抱歉地说忘了带钱，老张<span class="blank">
                <select class="passage-blank" data-question="6">
                    <option value="">--请选择--</option>
                    <option value="维持">维持</option>
                    <option value="竟然">竟然</option>
                    <option value="追赶">追赶</option>
                    <option value="打量">打量</option>
                    <option value="损坏">损坏</option>
                    <option value="头皮">头皮</option>
                    <option value="脱落">脱落</option>
                    <option value="吸收">吸收</option>
                    <option value="位于">位于</option>
                    <option value="特色">特色</option>
                </select>
            </span>了他几眼，笑着说："下次补上就行。"<br><br>
            
            回到店里，老张发现顾客的帽子落在了座位上，帽檐上还沾着一些<span class="blank">
                <select class="passage-blank" data-question="7">
                    <option value="">--请选择--</option>
                    <option value="维持">维持</option>
                    <option value="竟然">竟然</option>
                    <option value="追赶">追赶</option>
                    <option value="打量">打量</option>
                    <option value="损坏">损坏</option>
                    <option value="头皮">头皮</option>
                    <option value="脱落">脱落</option>
                    <option value="吸收">吸收</option>
                    <option value="位于">位于</option>
                    <option value="特色">特色</option>
                </select>
            </span>，像是刚去过工地。他担心帽子上的灰尘<span class="blank">
                <select class="passage-blank" data-question="8">
                    <option value="">--请选择--</option>
                    <option value="维持">维持</option>
                    <option value="竟然">竟然</option>
                    <option value="追赶">追赶</option>
                    <option value="打量">打量</option>
                    <option value="损坏">损坏</option>
                    <option value="头皮">头皮</option>
                    <option value="脱落">脱落</option>
                    <option value="吸收">吸收</option>
                    <option value="位于">位于</option>
                    <option value="特色">特色</option>
                </select>
            </span>到其他物品上，便小心地收了起来。<br><br>
            
            傍晚，顾客来取帽子，还特意带来了自家种的蔬菜表示感谢。老张感慨道："人与人之间的信任，才能<span class="blank">
                <select class="passage-blank" data-question="9">
                    <option value="">--请选择--</option>
                    <option value="维持">维持</option>
                    <option value="竟然">竟然</option>
                    <option value="追赶">追赶</option>
                    <option value="打量">打量</option>
                    <option value="损坏">损坏</option>
                    <option value="头皮">头皮</option>
                    <option value="脱落">脱落</option>
                    <option value="吸收">吸收</option>
                    <option value="位于">位于</option>
                    <option value="特色">特色</option>
                </select>
            </span>长久的情谊啊。"
        </div>
    </div>
    
    <button class="submit-btn" id="submit-btn">提交答案并查看结果</button>
    
    <div class="result" id="result">
        <div class="score" id="score"></div>
        <div id="answer-details"></div>
    </div>
    
    <script>
        // 打乱数组顺序的工具函数（Fisher-Yates 洗牌算法）
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
        
        // 1. 处理第一大题：拖拽匹配（中文词汇拖拽到英文解释）
        const chineseVocab = [
            { id: 1, text: "律师" },
            { id: 2, text: "杰出" },
            { id: 3, text: "心愿" },
            { id: 4, text: "地道" },
            { id: 5, text: "冷清" },
            { id: 6, text: "筋疲力尽" },
            { id: 7, text: "承受" },
            { id: 8, text: "尝试" },
            { id: 9, text: "国家级" },
            { id: 10, text: "旅游景区" }
        ];
        
        // 存储用户匹配结果
        const userMatches = {};
        // 记录当前拖拽的元素ID
        let draggedItemId = null;
        
        // 打乱中文词汇顺序并动态生成可拖拽元素
        const shuffledChineseVocab = shuffleArray(chineseVocab);
        const chineseContainer = document.getElementById('chinese-vocab-container');
        shuffledChineseVocab.forEach(vocab => {
            const div = document.createElement('div');
            div.className = 'drag-item';
            div.setAttribute('data-id', vocab.id);
            div.setAttribute('draggable', 'true');
            div.textContent = vocab.text;
            chineseContainer.appendChild(div);
            
            // 添加拖拽事件监听
            div.addEventListener('dragstart', handleDragStart);
            div.addEventListener('dragend', handleDragEnd);
        });
        
        // 拖拽开始事件
        function handleDragStart(e) {
            // 记录拖拽元素的ID
            draggedItemId = this.getAttribute('data-id');
            // 添加拖拽样式
            this.classList.add('dragging');
            // 设置拖拽数据
            e.dataTransfer.setData('text/plain', draggedItemId);
            // 设置拖拽图像（可选）
            setTimeout(() => {
                this.style.opacity = '0.4';
            }, 0);
        }
        
        // 拖拽结束事件
        function handleDragEnd() {
            // 移除拖拽样式
            this.classList.remove('dragging');
            this.style.opacity = '1';
            // 清除所有放置区域的高亮样式
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.classList.remove('highlight');
            });
        }
        
        // 获取所有放置区域并添加事件监听
        const dropZones = document.querySelectorAll('.drop-zone');
        dropZones.forEach(zone => {
            zone.addEventListener('dragover', handleDragOver);
            zone.addEventListener('dragenter', handleDragEnter);
            zone.addEventListener('dragleave', handleDragLeave);
            zone.addEventListener('drop', handleDrop);
        });
        
        // 拖拽经过放置区域
        function handleDragOver(e) {
            e.preventDefault(); // 允许放置
        }
        
        // 拖拽进入放置区域
        function handleDragEnter(e) {
            e.preventDefault();
            // 添加高亮样式
            this.classList.add('highlight');
        }
        
        // 拖拽离开放置区域
        function handleDragLeave() {
            // 移除高亮样式
            this.classList.remove('highlight');
        }
        
        // 放置元素
        function handleDrop(e) {
            e.preventDefault();
            // 移除高亮样式
            this.classList.remove('highlight');
            // 添加填充样式
            this.classList.add('filled');
            
            // 获取拖拽的词汇ID
            const vocabId = e.dataTransfer.getData('text/plain');
            // 获取当前放置区域的答案ID
            const answerId = this.getAttribute('data-answer');
            
            // 记录匹配关系
            userMatches[vocabId] = answerId;
            
            // 在放置区域显示拖拽的词汇（便于用户确认）
            const draggedItem = document.querySelector(`.drag-item[data-id="${vocabId}"]`);
            if (draggedItem) {
                // 创建一个副本显示在放置区域
                const displayItem = document.createElement('div');
                displayItem.className = 'dropped-item';
                displayItem.textContent = draggedItem.textContent;
                displayItem.style.marginBottom = '5px';
                displayItem.style.fontWeight = 'bold';
                
                // 清除该区域已有的显示项
                const existingItems = this.querySelectorAll('.dropped-item');
                existingItems.forEach(item => item.remove());
                
                // 添加新的显示项
                this.prepend(displayItem);
            }
        }
        
        // 2. 处理第二大题：随机排序选项
        const sentenceOptions = ["细心", "关怀", "奇迹", "坚决", "负责", "口语", "操练", "准确", "发音", "提醒"];
        
        // 为每个句子填空题生成随机排序的选项
        document.querySelectorAll('.sentence-blank').forEach(select => {
            const shuffledOptions = shuffleArray(sentenceOptions);
            shuffledOptions.forEach(optionText => {
                const option = document.createElement('option');
                option.value = optionText;
                option.textContent = optionText;
                select.appendChild(option);
            });
        });
        
        // 字体大小控制
        let currentFontSize = 16;
        const fontSizeStep = 2;
        
        document.getElementById('font-smaller').addEventListener('click', function() {
            currentFontSize = Math.max(12, currentFontSize - fontSizeStep);
            document.body.style.fontSize = currentFontSize + 'px';
        });
        
        document.getElementById('font-default').addEventListener('click', function() {
            currentFontSize = 16;
            document.body.style.fontSize = currentFontSize + 'px';
        });
        
        document.getElementById('font-larger').addEventListener('click', function() {
            currentFontSize = Math.min(24, currentFontSize + fontSizeStep);
            document.body.style.fontSize = currentFontSize + 'px';
        });
        
        // 正确答案
        const correctAnswers = {
            matching: {
                '1': '1', '2': '2', '3': '3', '4': '4', '5': '5',
                '6': '6', '7': '7', '8': '8', '9': '9', '10': '10'
            },
            sentence: {
                '1': '细心', '2': '关怀', '3': '奇迹', '4': '坚决', '5': '负责',
                '6': '口语', '7': '操练', '8': '准确', '9': '发音', '10': '提醒'
            },
            passage: {
                '1': '位于', '2': '特色', '3': '损坏', '4': '竟然', '5': '追赶',
                '6': '打量', '7': '头皮', '8': '吸收', '9': '维持'
            }
        };
        
        // 提交按钮逻辑（核心修复部分）
        document.getElementById('submit-btn').addEventListener('click', function() {
            let totalScore = 0;
            let totalQuestions = 0;
            let detailsHTML = '';
            
            // 1. 检查词义拖拽匹配题（修复：将数字i转为字符串作为键）
            detailsHTML += '<h3>一、词义匹配题结果</h3>';
            for (let i = 1; i <= 10; i++) {
                totalQuestions++;
                const vocabKey = i.toString(); // 转为字符串键，匹配userMatches的存储格式
                const userAnswer = userMatches[vocabKey] || '未作答';
                const correctAnswer = correctAnswers.matching[vocabKey];
                const isCorrect = userAnswer === correctAnswer;
                
                // 获取中文词汇和英文解释文本（用于结果显示）
                const vocabText = chineseVocab.find(v => v.id == i).text;
                const correctZone = document.querySelector(`.drop-zone[data-answer="${correctAnswer}"]`);
                const correctAnswerText = correctZone ? correctZone.firstChild.textContent.trim() : '';
                
                if (isCorrect) {
                    totalScore++;
                    detailsHTML += `<p class="correct">${vocabText} - 正确，匹配: ${correctAnswerText}</p>`;
                } else {
                    // 处理未作答或匹配错误的情况
                    let userAnswerText = '未作答';
                    if (userAnswer !== '未作答') {
                        const userZone = document.querySelector(`.drop-zone[data-answer="${userAnswer}"]`);
                        userAnswerText = userZone ? userZone.firstChild.textContent.trim() : '无效匹配';
                    }
                    detailsHTML += `<p class="incorrect">${vocabText} - 错误，你的匹配: ${userAnswerText}，正确匹配: ${correctAnswerText}</p>`;
                }
            }
            
            // 2. 检查句子填空题
            detailsHTML += '<h3>二、句子填空题结果</h3>';
            const sentenceBlanks = document.querySelectorAll('.sentence-blank');
            sentenceBlanks.forEach(blank => {
                totalQuestions++;
                const questionNum = blank.getAttribute('data-question');
                const userAnswer = blank.value || '未作答';
                const correctAnswer = correctAnswers.sentence[questionNum];
                const isCorrect = userAnswer === correctAnswer;
                
                if (isCorrect) {
                    totalScore++;
                    detailsHTML += `<p class="correct">${questionNum}. 正确 - 你的答案: ${userAnswer}</p>`;
                } else {
                    detailsHTML += `<p class="incorrect">${questionNum}. 错误 - 你的答案: ${userAnswer}，正确答案: ${correctAnswer}</p>`;
                }
            });
            
            // 3. 检查短文填空题
            detailsHTML += '<h3>三、短文填空题结果</h3>';
            const passageBlanks = document.querySelectorAll('.passage-blank');
            passageBlanks.forEach(blank => {
                totalQuestions++;
                const questionNum = blank.getAttribute('data-question');
                const userAnswer = blank.value || '未作答';
                const correctAnswer = correctAnswers.passage[questionNum];
                const isCorrect = userAnswer === correctAnswer;
                
                if (isCorrect) {
                    totalScore++;
                    detailsHTML += `<p class="correct">${questionNum}. 正确 - 你的答案: ${userAnswer}</p>`;
                } else {
                    detailsHTML += `<p class="incorrect">${questionNum}. 错误 - 你的答案: ${userAnswer}，正确答案: ${correctAnswer}</p>`;
                }
            });
            
            // 显示结果
            document.getElementById('score').textContent = `总分: ${totalScore}/${totalQuestions} 分`;
            document.getElementById('answer-details').innerHTML = detailsHTML;
            document.getElementById('result').style.display = 'block';
            
            // 滚动到结果部分
            document.getElementById('result').scrollIntoView({ behavior: 'smooth' });
        });
    </script>
</body>
</html>
