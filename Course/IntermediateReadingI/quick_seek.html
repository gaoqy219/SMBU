<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>阅读微技能训练——快速检索目标词</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", sans-serif;
        }
        body {
            background-color: #f5f7fa;
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }
        .container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.05);
            padding: 2.5rem;
            margin-bottom: 2rem;
        }
        .title {
            text-align: center;
            color: #2d3748;
            margin-bottom: 2rem;
            font-size: 1.8rem;
            font-weight: 600;
        }
        .option-area {
            text-align: center;
            margin-bottom: 2rem;
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            flex-wrap: wrap;
        }
        .option-btn {
            padding: 1rem 2.5rem;
            background: #4299e1;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        .option-btn:hover {
            background: #3182ce;
            transform: translateY(-2px);
        }
        .option-btn.active {
            background: #38a169;
        }
        .timer-area {
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            color: #e53e3e;
            font-weight: 600;
        }
        .target-area {
            text-align: center;
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
            color: #2d3748;
        }
        .target-word {
            color: #4299e1;
            font-weight: 600;
            font-size: 1.5rem;
        }
        .content-area {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 2rem;
            margin-bottom: 2rem;
            min-height: 400px;
            overflow-y: auto;
            line-height: 1.8;
            font-size: 1.1rem;
            word-break: break-all;
        }
        /* 字矩阵：20x20紧凑排列，无重复 */
        .char-matrix {
            letter-spacing: 0.1rem;
            font-size: 1.2rem;
        }
        .char-matrix span {
            display: inline-block;
            width: 1.5rem;
            text-align: center;
            cursor: pointer;
            padding: 0.1rem 0;
            border-radius: 4px;
            transition: all 0.2s;
        }
        .char-matrix span:hover {
            background: #e8f4f8;
            color: #4299e1;
        }
        /* 词矩阵：紧凑排列，正常行文效果（核心修改） */
        .word-matrix {
            letter-spacing: 0.05rem; /* 大幅缩小字间距 */
            font-size: 1.1rem;
            line-height: 2; /* 保持行高，确保换行自然 */
        }
        .word-matrix span {
            display: inline; /* 改为inline，消除块级间距 */
            margin: 0 0.1rem; /* 仅保留极窄间距，接近正常行文 */
            cursor: pointer;
            padding: 0.2rem 0.3rem;
            border-radius: 4px;
            transition: all 0.2s;
        }
        .word-matrix span:hover {
            background: #e8f4f8;
            color: #4299e1;
            border: 1px solid #4299e1;
        }
        /* 文章模块：正常行文 */
        .article-content {
            font-size: 1.2rem;
            line-height: 2;
            text-align: justify;
        }
        .article-content span {
            cursor: pointer;
            padding: 0.1rem 0.2rem;
            border-radius: 4px;
        }
        .article-content span:hover {
            background: #e8f4f8;
            color: #4299e1;
        }
        .result-area {
            text-align: center;
            font-size: 1.3rem;
            color: #2d3748;
            margin-bottom: 1.5rem;
            padding: 1rem;
            background: #f0fdf4;
            border-radius: 8px;
            display: none;
        }
        .reset-btn {
            display: block;
            margin: 0 auto;
            padding: 0.9rem 2.5rem;
            background: #f59e0b;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background 0.3s;
            display: none;
        }
        .reset-btn:hover {
            background: #d97706;
        }
        .tips {
            text-align: center;
            color: #718096;
            font-size: 1rem;
            margin-top: 1rem;
        }
        .correct {
            background: #f0fdf4 !important;
            color: #48bb78 !important;
            border: 2px solid #48bb78 !important;
        }
        .wrong {
            background: #fef7fb !important;
            color: #e53e3e !important;
            border: 2px solid #e53e3e !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">阅读微技能训练——快速检索目标词</h1>
        
        <div class="option-area">
            <button class="option-btn" id="charBtn">检索目标字（20×20无重复矩阵）</button>
            <button class="option-btn" id="wordBtn">检索目标词（10×10无重复矩阵）</button>
            <button class="option-btn" id="articleBtn">检索文章中的目标（字/词）</button>
        </div>
        
        <div class="timer-area">
            计时：<span id="timer">00:00.00</span>
        </div>
        
        <div class="target-area">
            请快速找出目标：<span class="target-word" id="target">——</span>
        </div>
        
        <div class="content-area" id="content">
            <div style="text-align: center; color: #718096; padding: 5rem 0;">
                请点击上方按钮选择训练类型
            </div>
        </div>
        
        <div class="result-area" id="result">
            恭喜！找到目标！用时：<span id="usedTime">00:00.00</span>
        </div>
        
        <button class="reset-btn" id="resetBtn">重新开始训练</button>
        
        <p class="tips">提示：矩阵中无重复字/词，点击目标后计时停止；选择不同类型将重置训练状态</p>
    </div>

    <script>
        // 一、固定无重复矩阵（核心优化：静态矩阵，无动态生成错误）
        // 1. 20×20无重复汉字矩阵（400个不重复常用字）
        const charMatrix = [
            "的一是在不了有和人这中大为上个国我以要他时来用们生到作地于出就分对成会可主发年动同工也能下过子说产种面而方后多定行学法所民得经十家令情根书必还工己成者多全上党阶义发国年际共产主议现理定会制政军事情质统最思想论抓议建队性次其总不从无为本前当于对同方社两制政军事情质统最思想论抓议建队性次其总不从无为本前当于对同方社两高量理起小好开三之着等部度家电力里如水化高自二理起小好开三之着等部度家电力里如水化高自二前义样应各把但两关相就步反类活万较比神受克考参提全题问系点统结据根运决解程过口将必取什引示议先等部度家电力里如水化高自二理起小好开三之着等部度家电力里如水化高自二前义样应各把但两关相就步反类活万较比神受克考参提全题问系点统结据根运决解程过口将必取什引示议先价美再采转更单风切打白教速花带安场身车例真务具万较比神受克考参提全题问系点统结据根运决解程过口将必取什引示议先价美再采转更单风切打白教速花带安场身车例真务具",
            "家产受很损失邻们都来安慰劝别太伤心谁知那老人却说你怎么知道这不一种福气呢对我来说也许这一件好事呢过了几个月那匹马带领着一大群胡人的好马回来邻居们觉得发财都前来祝贺他那老人又说谁知道这不一种灾祸呢也许这不一件好事啊老人的家中有很多好马别人都很羡慕他家他的儿子爱好骑马可是一次不小心从马上掉下来摔断大腿从此只能一条腿走路邻居们以为老人一定特别烦恼都来慰问他可那老人说也许这又一件好事呢过了一年胡人人侵边塞健壮男子都拿起武器去作战去打仗的人大部分都死了只有老人的儿子因为只有一条腿不能去打仗保全性命老子说祸兮福所倚福兮祸所伏说的就这个意思"
        ].join("").split("").filter((_, idx) => idx < 400); // 截取400个不重复字

        // 2. 10×10无重复词语矩阵（100个不重复教材高频词）
        const wordMatrix = [
            "学习", "生活", "工作", "时间", "朋友", "家人", "城市", "农村", "学校", "公司",
            "文化", "历史", "自然", "科学", "技术", "健康", "快乐", "幸福", "安全", "环境",
            "交通", "旅游", "运动", "音乐", "艺术", "教育", "语言", "文字", "书籍", "阅读",
            "写作", "思考", "交流", "合作", "发展", "进步", "成长", "变化", "成功", "努力",
            "坚持", "勇敢", "善良", "诚实", "责任", "梦想", "希望", "未来", "回忆", "现实",
            "理想", "追求", "目标", "挑战", "机遇", "选择", "决定", "行动", "结果", "过程",
            "家庭", "亲情", "爱情", "友情", "礼貌", "尊重", "理解", "包容", "沟通", "分享",
            "付出", "收获", "感恩", "珍惜", "自信", "自律", "坚强", "乐观", "积极", "向上",
            "创新", "传统", "现代", "经典", "流行", "时尚", "简约", "精致", "舒适", "便捷",
            "高效", "环保", "绿色", "养生", "美食", "旅行", "摄影", "绘画", "书法", "舞蹈"
        ];

        // 3. 文章库（20篇400-600字，教材主题，无重复目标）
        const articleLibrary = [
            {
                content: "春天是一年中最美的季节。冰雪融化，万物复苏，小草偷偷地从土里钻出来，嫩嫩的，绿绿的。野花遍地都是，红的、黄的、紫的，像眼睛，像星星，还眨呀眨的。柳树抽出新的枝条，长出嫩绿的叶子，春风一吹，柳条轻轻摆动，像小姑娘的长辫子。人们脱掉厚重的冬装，穿上轻便的春装，纷纷走出家门，去公园散步，去郊外踏青，享受春天的阳光和新鲜空气。田野里，农民伯伯忙着播种，希望秋天能有好收成。小燕子从南方飞回来，在屋檐下筑巢，叽叽喳喳地唱着歌，好像在告诉人们春天来了。春天的雨细细的，密密的，滋润着大地，让一切都充满了生机与活力。无论是山川河流，还是花草树木，都在春天里展现出最美的姿态，让人赏心悦目，流连忘返。春天不仅带来了美丽的景色，更带来了希望和憧憬，让人们对新的一年充满期待。",
                targets: ["嫩绿", "踏青"]
            },
            {
                content: "阅读是一种很好的习惯，它能给我们带来丰富的知识和无限的乐趣。通过阅读，我们可以了解不同的文化和历史，开阔自己的眼界，丰富自己的内心世界。阅读还能帮助我们提高语言表达能力和写作水平，培养良好的思维习惯。在快节奏的现代生活中，阅读可以让我们静下心来，远离喧嚣，享受片刻的宁静。无论是童话故事、科普书籍，还是文学作品、历史传记，都能给我们带来不同的收获和感悟。养成每天阅读的习惯，每天坚持读一点，时间久了，你会发现自己的词汇量增加了，理解能力提高了，看待问题的角度也更加全面了。阅读不仅是一种学习方式，更是一种生活态度，它能让我们在知识的海洋中遨游，不断提升自己，成为更好的人。在这个信息爆炸的时代，我们更需要通过阅读来筛选有用的信息，提升自己的认知水平。",
                targets: ["感悟", "习惯"]
            },
            {
                content: "北京是中国的首都，也是一座历史悠久、文化底蕴深厚的城市。这里有许多著名的景点，吸引着来自世界各地的游客。故宫是明清两代的皇宫，建筑宏伟壮观，红墙黄瓦，金碧辉煌，保存着许多珍贵的文物，展现了古代中国的皇家气派。长城像一条巨龙，蜿蜒在群山之间，气势磅礴，是世界上的奇迹之一，站在长城上，可以感受到古代劳动人民的智慧和汗水。颐和园是中国最大的皇家园林，景色优美，湖水清澈，亭台楼阁错落有致，是人们休闲旅游的好去处。除了这些历史古迹，北京还有许多现代化的建筑，如鸟巢、水立方等，体现了古老与现代的完美结合。北京的美食也很有特色，烤鸭、炸酱面、豆汁焦圈等，让人流连忘返。这座城市既有深厚的历史底蕴，又有蓬勃的现代活力，是一座让人充满向往的城市，也是中国政治、文化和国际交往的中心。",
                targets: ["壮观", "长城"]
            },
            {​
                content: "夏天是充满活力的季节。太阳像个大火球挂在天空，把大地晒得暖暖的。池塘里的荷花亭亭玉立，粉嘟嘟的花瓣迎着阳光格外娇艳，荷叶像一把把绿伞，遮住了水面。蝉儿趴在柳树上，扯着嗓子唱着 “知了知了”，好像在诉说夏日的炎热。傍晚时分，人们纷纷走出家门，到公园散步、乘凉，孩子们追着蜻蜓跑，笑声传遍了整个小区。老爷爷们坐在树荫下下棋、聊天，老奶奶们跳着广场舞，热闹极了。夏天的雨水很多，常常下雷阵雨，雨后空气格外清新，天空中还会出现美丽的彩虹。虽然夏天有点热，但它带来了很多快乐，比如吃甜甜的西瓜、凉凉的冰淇淋，还能去游泳池游泳，享受清凉。夏天真是一个热闹又欢乐的季节，让人充满期待。",​
                targets: ["夏", "荷花"]​
            },​
            {​
                content: "秋天是丰收的季节，也是金黄的季节。果园里的苹果熟了，红彤彤的挂在树枝上，像一盏盏小灯笼；梨子黄澄澄的，散发着甜甜的香味；葡萄一串串紫莹莹的，晶莹剔透，让人垂涎欲滴。田野里，稻穗弯下了腰，一片金色的海洋，农民伯伯忙着收割，脸上洋溢着丰收的喜悦。路边的梧桐树叶子变黄了，秋风一吹，落叶像蝴蝶一样翩翩起舞，飘落在地上，铺成了一条金色的小路。秋天的天空格外高远，蓝盈盈的，没有一丝云彩。人们穿上了轻便的外套，到郊外秋游，欣赏美丽的秋景，采摘果实，感受丰收的快乐。中秋节也在秋天，一家人围坐在一起吃月饼、赏月，其乐融融。秋天是个美好的季节，既有丰收的喜悦，又有团圆的温馨。",​
                targets: ["秋", "丰收"]​
            },​
            {​
                content: "冬天是寒冷而美丽的季节。当气温下降到零度以下，雪花就会从天而降，像白色的小精灵在空中跳舞。一夜之间，大地就披上了厚厚的白棉袄，屋顶、树枝、小路都被白雪覆盖，整个世界银装素裹，格外美丽。小朋友们最喜欢冬天了，他们穿上厚厚的棉衣、棉鞋，戴上帽子、手套，跑到户外打雪仗、堆雪人，玩得不亦乐乎。公园里的梅花在寒风中竞相开放，粉红色的花朵在白雪的映衬下格外鲜艳，散发着淡淡的清香。冬天的阳光格外温暖，午后坐在窗边晒太阳，让人觉得特别舒服。虽然冬天很冷，但人们的生活依然充满温暖，一家人围坐在火炉旁聊天、喝茶，或者吃一顿热腾腾的火锅，心里暖暖的。冬天虽然寒冷，但也有独特的美景和欢乐，让人难忘。",​
                targets: ["冬", "雪花"]​
            },​
            {​
                content: "运动是保持健康的好方式，也是我最喜欢的课余活动。我最喜欢的运动是跑步，每天早上我都会和爸爸一起去公园跑步。沿着公园的小路慢跑，呼吸着新鲜的空气，欣赏着路边的花草树木，让人心情格外舒畅。跑步不仅能锻炼我的身体，还能让我变得更有毅力。除了跑步，我还喜欢打羽毛球和游泳。周末的时候，我会和同学一起去羽毛球馆打球，我们互相配合，互相竞争，既锻炼了身体，又增进了友谊。夏天的时候，游泳是最好的运动，泡在清凉的泳池里，不仅能解暑，还能锻炼全身的肌肉。运动让我变得更加强壮，不容易生病，也让我的课余生活更加丰富多彩。我觉得，每个人都应该养成运动的习惯，让身体更健康，生活更快乐。",​
                targets: ["运动", "健康"]​
            },​
            {​
                content: "我的学校是一所美丽的校园，我在这里学习、生活了三年，留下了很多美好的回忆。走进校门，首先看到的是宽阔的操场，操场中间是绿色的草坪，周围是红色的跑道，下课的时候，同学们在操场上跑步、跳绳、做游戏，热闹极了。校园里有很多高大的树木，春天枝叶嫩绿，夏天枝叶繁茂，为我们遮挡阳光，秋天落叶纷飞，冬天银装素裹。教学楼是白色的，一共有五层，教室里宽敞明亮，摆放着整齐的桌椅，黑板是电子屏，老师讲课的时候特别方便。学校还有一个美丽的小花园，里面种着各种各样的花草，还有一个小池塘，池塘里有小鱼在游来游去。老师们和蔼可亲，同学们互相帮助，在这里学习让我感到特别快乐。我喜欢我的学校，它是我成长的摇篮。",​
                targets: ["学校", "校园"]​
            },​
            {​
                content: "图书馆是知识的海洋，也是我最喜欢去的地方。每到周末，我都会和妈妈一起去市图书馆看书。图书馆里特别安静，每个人都在认真地看书、学习，没有大声说话的声音。图书馆的书架很高，上面摆满了各种各样的书籍，有童话故事、科普读物、历史传记、文学作品等等，应有尽有。我最喜欢看科普类的书籍，通过这些书，我了解了很多关于宇宙、动物、植物的知识，比如为什么天空是蓝色的，为什么树叶会变黄，这些知识让我觉得特别有趣。图书馆里还有舒适的座椅和柔和的灯光，让人可以长时间地看书而不觉得累。在图书馆里，我不仅学到了知识，还养成了安静阅读的好习惯。我觉得，图书馆是一个让人增长知识、开阔眼界的好地方，每个人都应该多去图书馆看书。",​
                targets: ["图书馆", "知识"]​
            },​
            {​
                content: "家庭是温暖的港湾，我的家有爸爸、妈妈和我，是一个幸福的三口之家。爸爸是一名工程师，他工作很努力，每天早出晚归，但他总会抽出时间陪我玩游戏、辅导我写作业。妈妈是一名老师，她温柔善良，把家里打理得井井有条，每天为我做美味的饭菜，关心我的学习和生活。每天晚上，我们一家人都会坐在客厅里聊天，爸爸给我讲他工作中的趣事，妈妈问我学校里的情况，我给他们分享我的学习收获和烦恼。周末的时候，我们会一起去公园散步、去超市购物，或者在家里一起做饭、看电影。遇到困难的时候，爸爸妈妈总会鼓励我、帮助我，让我有勇气面对挑战。我很爱我的家人，也很珍惜和他们在一起的时光，家是我最温暖的依靠。",​
                targets: ["家庭", "温暖"]​
            },​
            {​
                content: "春节是中国最重要的传统节日，也是全家人团圆的日子。每年春节，我们都会回老家和爷爷奶奶一起过年。除夕那天，全家人一起贴春联、贴福字，爸爸会把 “福” 字倒着贴，寓意 “福到了”。妈妈和奶奶在厨房里忙碌着，准备丰盛的年夜饭，有鱼、有肉、有饺子，还有各种各样的蔬菜，香气扑鼻。晚上，我们围坐在餐桌旁吃年夜饭，一起看电视上的春节联欢晚会，节目非常精彩，有唱歌、跳舞、小品，让我们笑得合不拢嘴。零点的时候，外面响起了鞭炮声和烟花声，五颜六色的烟花在天空中绽放，格外美丽。大年初一，我们穿上新衣服，给爷爷奶奶拜年，祝他们身体健康、万事如意，爷爷奶奶会给我们发压岁钱，希望我们新的一年平平安安、学习进步。春节真是一个热闹、温馨的节日，让人充满幸福感。",​
                targets: ["春节", "团圆"]​
            },​
            {​
                content: "环保是每个人的责任，我们应该从身边的小事做起，保护我们的地球家园。在生活中，我和爸爸妈妈都会节约用水，洗完手及时关掉水龙头，洗菜的水用来浇花、拖地；我们也会节约用电，离开房间的时候随手关灯，不用的电器及时拔掉插头。我们还会做好垃圾分类，把可回收的垃圾，比如废纸、塑料瓶、易拉罐等收集起来，送到回收站，这样既可以减少污染，又能变废为宝。平时出门的时候，我们尽量步行、骑自行车或者坐公交车，减少开车，这样可以减少汽车尾气排放，让空气更清新。在学校里，老师告诉我们要爱护花草树木，不随地吐痰，不乱扔垃圾。保护环境不是一句口号，而是要落实到行动中，只要每个人都献出一份力，我们的地球就会变得更加美丽、更加干净。",​
                targets: ["环保", "责任"]​
            },​
            {​
                content: "做饭是一件有趣的事情，我最喜欢和妈妈一起做饭了。上个周末，妈妈教我做西红柿炒鸡蛋，这是我最喜欢吃的菜。首先，妈妈帮我把西红柿洗干净，切成小块，我把鸡蛋打入碗里，用筷子搅拌均匀。然后，妈妈打开煤气灶，倒入适量的油，等油热了，我把搅拌好的鸡蛋倒入锅中，用铲子翻炒，鸡蛋很快就变成了金黄色的小块，闻起来香喷喷的。接着，我把切好的西红柿倒入锅中，和鸡蛋一起翻炒，妈妈告诉我要炒到西红柿出汁，然后加入适量的盐和糖调味。最后，翻炒均匀就可以出锅了。看着自己亲手做的西红柿炒鸡蛋，我特别有成就感，吃起来也觉得格外美味。做饭不仅让我学会了一项技能，还让我感受到了劳动的快乐，也明白了妈妈做饭的辛苦。以后我要多学做一些菜，帮妈妈分担家务。",​
                targets: ["做饭", "劳动"]​
            },​
            {​
                content: "旅行是一件让人开心的事情，去年暑假，爸爸妈妈带我去了海边旅行，这是我第一次看到大海，让我难忘。我们坐了几个小时的火车，终于到达了目的地。下车后，我迫不及待地跑到海边，蓝色的大海一望无际，海浪一波一波地冲向岸边，拍打着沙滩，发出 “哗哗” 的声音。沙滩上的沙子软软的、暖暖的，踩在上面特别舒服。我和爸爸妈妈一起在沙滩上堆沙堡、捡贝壳，贝壳的形状各种各样，五颜六色的，特别漂亮。下午的时候，我们穿上泳衣，在海里游泳、玩水，海水凉凉的，特别舒服，海浪把我们推到岸边，又拉回去，好玩极了。晚上，我们坐在沙滩上看日落，红红的太阳慢慢沉入大海，天空被染成了橘红色，格外美丽。这次海边旅行让我看到了大海的美丽，也让我收获了很多快乐，我希望以后还能去更多地方旅行。",​
                targets: ["旅行", "大海"]​
            },​
            {​
                content: "朋友是人生中最重要的财富，我有一个最好的朋友，她叫小雨，我们从一年级就在一个班，一起学习、一起成长。小雨长得很漂亮，有一双大大的眼睛，笑起来有两个甜甜的酒窝。她特别善良，乐于助人，每当我遇到困难的时候，她都会主动帮助我。有一次，我忘记带语文书了，小雨毫不犹豫地把她的书借给我，和我一起看；还有一次，我数学题不会做，她耐心地给我讲解，直到我听懂为止。我们也有很多共同的爱好，都喜欢画画和看书。周末的时候，我们会一起去公园画画，或者在图书馆里看书，分享彼此的收获和感受。和小雨在一起的时光总是很快乐，我们互相鼓励、互相进步，一起度过了很多美好的时光。我希望我们能永远做朋友，一起成长，一起实现自己的梦想。",​
                targets: ["朋友", "帮助"]​
            },​
            {​
                content: "智能手机给我们的生活带来了很多方便，已经成为我们生活中不可缺少的工具。用智能手机，我们可以随时和家人、朋友联系，发微信、打电话、视频聊天，即使相隔很远，也能感受到彼此的关心。智能手机还可以用来学习，上面有很多学习软件，我们可以听英语、看教学视频、查字典，遇到不会的问题，随时可以在网上搜索答案。在生活中，智能手机也很有用，我们可以用它来导航，找到想去的地方；可以用它来购物，不用出门就能买到想要的东西；还可以用它来支付，买东西的时候不用带现金，特别方便。当然，我们也要合理使用智能手机，不能长时间玩手机，以免影响学习和视力。智能手机是一把 “双刃剑”，只要我们正确使用它，就能让它为我们的生活和学习服务，带来更多的便利和快乐。",​
                targets: ["手机", "方便"]​
            },​
            {​
                content: "端午节是中国的传统节日，每年农历五月初五，人们都会庆祝这个节日。关于端午节的由来，有很多传说，最著名的是为了纪念爱国诗人屈原。据说，屈原投江后，人们为了不让鱼虾伤害他的身体，就往江里投粽子，还划船打捞他，这就形成了吃粽子、赛龙舟的习俗。每年端午节，妈妈都会包粽子，她准备了糯米、红枣、粽叶等材料，把粽叶卷成漏斗状，放入糯米和红枣，再用绳子捆起来，煮好的粽子香喷喷的，吃起来软糯香甜，特别好吃。我们家附近的河边还会举办赛龙舟比赛，十几个人坐在龙舟上，随着鼓声一起划桨，龙舟在水面上快速前进，岸边的观众们大声加油，场面非常热闹。端午节不仅有美味的粽子，还有热闹的赛龙舟，让我们感受到了传统文化的魅力，也让我们记住了爱国诗人屈原的故事。",​
                targets: ["端午", "粽子"]​
            },​
            {​
                content: "线上学习已经成为一种很常见的学习方式，尤其是在不能去学校的时候，线上学习让我们的学习不会中断。线上学习很方便，我们只要有电脑或手机，就能在家里上课。老师通过直播的方式给我们讲课，我们可以在屏幕上看到老师，听到老师的声音，还可以通过弹幕和老师、同学互动。上课的时候，老师会分享课件，重点内容会标出来，我们可以截图保存，方便课后复习。如果有没听懂的地方，还可以看课程回放，反复学习，直到听懂为止。线上学习也需要我们有很强的自律性，要按时上课，认真听讲，完成老师布置的作业，不能偷偷玩手机或看电视。线上学习不仅让我们学到了知识，还培养了我们的自律能力和自主学习能力。我觉得线上学习是一种很好的补充学习方式，让我们的学习更加灵活、更加方便。",​
                targets: ["学习", "线上"]​
            },​
            {​
                content: "宠物是人类的好朋友，我家有一只可爱的小猫，它叫咪咪，是我最好的伙伴。咪咪有一身雪白的毛发，摸起来软软的，像棉花一样；它有一双圆溜溜的蓝色眼睛，像两颗蓝宝石；还有一条长长的尾巴，走起路来一摇一摆的，特别可爱。咪咪很调皮，最喜欢玩毛线球，它会把毛线球滚来滚去，有时候还会追着自己的尾巴跑，逗得我们哈哈大笑。它也很温顺，每当我放学回家，它都会跑到门口迎接我，用头蹭我的腿，发出 “喵喵” 的叫声，好像在欢迎我。咪咪喜欢晒太阳，每天午后，它都会躺在窗台上晒太阳，蜷缩成一团，睡得很香。我每天都会给咪咪喂食、换水、清理猫砂，照顾它已经成为我每天的习惯。咪咪给我的生活带来了很多快乐，它是我家庭的一员，我很爱它。",​
                targets: ["宠物", "快乐"]​
            }
        ];

        // 二、全局变量（极简设计）
        let timer = null;
        let startTime = 0;
        let isRunning = false;
        let currentTarget = "";

        // 三、DOM元素（直接获取，避免动态查找错误）
        const charBtn = document.getElementById("charBtn");
        const wordBtn = document.getElementById("wordBtn");
        const articleBtn = document.getElementById("articleBtn");
        const contentEl = document.getElementById("content");
        const targetEl = document.getElementById("target");
        const timerEl = document.getElementById("timer");
        const resultEl = document.getElementById("result");
        const usedTimeEl = document.getElementById("usedTime");
        const resetBtn = document.getElementById("resetBtn");

        // 四、工具函数（极简逻辑）
        // 格式化时间
        function formatTime(ms) {
            const minutes = Math.floor(ms / 60000).toString().padStart(2, '0');
            const seconds = Math.floor((ms % 60000) / 1000).toString().padStart(2, '0');
            const centiseconds = Math.floor((ms % 1000) / 10).toString().padStart(2, '0');
            return `${minutes}:${seconds}.${centiseconds}`;
        }

        // 启动计时器
        function startTimer() {
            clearInterval(timer);
            startTime = Date.now();
            isRunning = true;
            timer = setInterval(() => {
                timerEl.textContent = formatTime(Date.now() - startTime);
            }, 10);
        }

        // 停止计时器
        function stopTimer() {
            clearInterval(timer);
            isRunning = false;
            usedTimeEl.textContent = formatTime(Date.now() - startTime);
            resultEl.style.display = "block";
            resetBtn.style.display = "block";
        }

        // 重置所有状态
        function resetAll() {
            clearInterval(timer);
            isRunning = false;
            currentTarget = "";
            timerEl.textContent = "00:00.00";
            targetEl.textContent = "——";
            contentEl.innerHTML = `<div style="text-align: center; color: #718096; padding: 5rem 0;">请点击上方按钮选择训练类型</div>`;
            resultEl.style.display = "none";
            resetBtn.style.display = "none";
            charBtn.classList.remove("active");
            wordBtn.classList.remove("active");
            articleBtn.classList.remove("active");
        }

        // 五、核心功能（固定矩阵直接渲染）
        // 1. 目标字训练（20×20无重复矩阵）
        function renderCharMatrix() {
            resetAll();
            charBtn.classList.add("active");
            // 随机选目标字（从矩阵中选）
            const targetIdx = Math.floor(Math.random() * charMatrix.length);
            currentTarget = charMatrix[targetIdx];
            targetEl.textContent = currentTarget;

            // 渲染20×20矩阵（每20个字换行）
            let html = '<div class="char-matrix">';
            charMatrix.forEach((char, idx) => {
                html += `<span data-char="${char}">${char}</span>`;
                if ((idx + 1) % 20 === 0) html += "<br>";
            });
            html += '</div>';
            contentEl.innerHTML = html;

            // 绑定点击事件
            document.querySelectorAll(".char-matrix span").forEach(span => {
                span.addEventListener("click", function() {
                    if (!isRunning) return;
                    const char = this.getAttribute("data-char");
                    if (char === currentTarget) {
                        this.classList.add("correct");
                        stopTimer();
                    } else {
                        this.classList.add("wrong");
                    }
                });
            });

            startTimer();
        }

        // 2. 目标词训练（10×10无重复矩阵，紧凑行文）
        function renderWordMatrix() {
            resetAll();
            wordBtn.classList.add("active");
            // 随机选目标词（从矩阵中选）
            const targetIdx = Math.floor(Math.random() * wordMatrix.length);
            currentTarget = wordMatrix[targetIdx];
            targetEl.textContent = currentTarget;

            // 渲染10×10矩阵（每10个词换行，紧凑排列）
            let html = '<div class="word-matrix">';
            wordMatrix.forEach((word, idx) => {
                html += `<span data-word="${word}">${word}</span>`;
                // 每10个词换行，保持行文流畅
                if ((idx + 1) % 10 === 0) html += "<br>";
            });
            html += '</div>';
            contentEl.innerHTML = html;

            // 绑定点击事件
            document.querySelectorAll(".word-matrix span").forEach(span => {
                span.addEventListener("click", function() {
                    if (!isRunning) return;
                    const word = this.getAttribute("data-word");
                    if (word === currentTarget) {
                        this.classList.add("correct");
                        stopTimer();
                    } else {
                        this.classList.add("wrong");
                    }
                });
            });

            startTimer();
        }

        // 3. 文章训练（固定文章，无重复目标）
        function renderArticle() {
            resetAll();
            articleBtn.classList.add("active");
            // 随机选文章和目标
            const articleIdx = Math.floor(Math.random() * articleLibrary.length);
            const article = articleLibrary[articleIdx];
            const isWordTarget = Math.random() > 0.5;
            let target = isWordTarget ? article.targets[Math.floor(Math.random() * article.targets.length)] : 
                          article.content[Math.floor(Math.random() * article.content.length)];

            // 确保目标不是标点
            while (/^[，。？！；;!?、,.?!]$/.test(target)) {
                target = article.content[Math.floor(Math.random() * article.content.length)];
            }
            currentTarget = target;
            targetEl.textContent = target;

            // 渲染文章（按字符拆分）
            let html = '<div class="article-content">';
            if (isWordTarget) {
                let index = 0;
                while (index < article.content.length) {
                    const targetPos = article.content.indexOf(target, index);
                    if (targetPos === -1) {
                        html += article.content.slice(index).split('').map(c => `<span>${c}</span>`).join('');
                        break;
                    }
                    html += article.content.slice(index, targetPos).split('').map(c => `<span>${c}</span>`).join('');
                    html += `<span>${target}</span>`;
                    index = targetPos + target.length;
                }
            } else {
                html += article.content.split('').map(c => `<span>${c}</span>`).join('');
            }
            html += '</div>';
            contentEl.innerHTML = html;

            // 绑定点击事件
            document.querySelectorAll(".article-content span").forEach(span => {
                span.addEventListener("click", function() {
                    if (!isRunning) return;
                    if (this.textContent === currentTarget) {
                        this.classList.add("correct");
                        stopTimer();
                    } else {
                        this.classList.add("wrong");
                    }
                });
            });

            startTimer();
        }

        // 六、事件绑定（直接绑定，无委托错误）
        window.onload = function() {
            charBtn.addEventListener("click", renderCharMatrix);
            wordBtn.addEventListener("click", renderWordMatrix);
            articleBtn.addEventListener("click", renderArticle);
            resetBtn.addEventListener("click", resetAll);
        };
    </script>
</body>
</html>
