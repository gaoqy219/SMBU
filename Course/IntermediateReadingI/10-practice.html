<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯æ±‡æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            background-color: #f5f5f5;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .question {
            background-color: white;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .question h3 {
            margin-top: 0;
            color: #444;
        }
        .options {
            margin: 15px 0;
        }
        .option {
            display: block;
            margin: 8px 0;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }
        /* é€‰ä¸­çŠ¶æ€æ ·å¼ */
        .option.selected {
            background-color: #e6f7ff;
            border-color: #1890ff;
        }
        .option:hover {
            background-color: #f0f8ff;
            border-color: #999;
        }
        .option.correct {
            background-color: #dff0d8;
            border-color: #3c763d;
        }
        .option.incorrect {
            background-color: #f2dede;
            border-color: #a94442;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
        }
        button:hover {
            background-color: #45a049;
        }
        #result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            display: none;
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .score {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
            text-align: center;
        }
        .feedback {
            text-align: center;
            color: #666;
            font-size: 16px;
        }
        /* æ”¹ä¸ºè‹±æ–‡ç±»åï¼Œè§£å†³JSè¯†åˆ«é—®é¢˜ */
        .matching-question {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }
        .matching-group {
            width: 45%;
        }
        .matching-item {
            padding: 8px;
            margin: 5px 0;
            background-color: #e9e9e9;
            border-radius: 4px;
            cursor: move;
            transition: background 0.3s;
        }
        .matching-item:hover {
            background-color: #e0e0e0;
        }
        .matching-area {
            min-height: 200px;
            border: 2px dashed #ccc;
            border-radius: 4px;
            padding: 10px;
            background-color: #fafafa;
        }
        .matched {
            background-color: #d5f5e3;
            border-color: #2ecc71;
        }
        /* æ‹–æ‹½ä¸­æ ·å¼ */
        .dragging {
            opacity: 0.5;
        }
        .question-section {
            margin-bottom: 30px;
        }
        .question-section h2 {
            color: #4CAF50;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>è¯æ±‡æµ‹è¯•</h1>
        <div id="questions-container"></div>
        <div style="text-align: center; margin-top: 30px;">
            <button id="submit-btn">æäº¤ç­”æ¡ˆ</button>
            <button id="refresh-btn">é‡æ–°å‡ºé¢˜</button>
        </div>
        <div id="result"></div>
    </div>

    <script>
        // ä»5ä¸ªç½‘é¡µä¸­æ•´ç†çš„å¼¹çª—ç”Ÿè¯æ•°æ®
        const vocabData = {
            "é€—äººçˆ±": {
                pinyin: "dÃ²u rÃ©n Ã i",
                cnExplain: "è®©äººå–œæ¬¢ï¼Œæƒ¹äººå–œçˆ±",
                en: "lovely, endearing",
                ru: "Ğ¼Ğ¸Ğ»Ñ‹Ğ¹, Ğ¾Ñ‡Ğ°Ñ€Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹"
            },
            "æ»¡æœˆ": {
                pinyin: "mÇn yuÃ¨",
                cnExplain: "å©´å„¿å‡ºç”Ÿåæ»¡ä¸€ä¸ªæœˆï¼›æœˆäº®å˜åœ†çš„çŠ¶æ€",
                en: "one month old (for baby); full moon",
                ru: "Ğ¼ĞµÑÑÑ† Ğ¾Ñ‚ Ñ€Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ñ; Ğ¿Ğ¾Ğ»Ğ½Ğ°Ñ Ğ»ÑƒĞ½Ğ°"
            },
            "æ·˜æ°”": {
                pinyin: "tÃ¡o qÃ¬",
                cnExplain: "é¡½çš®ï¼Œä¸å¬è¯",
                en: "naughty, mischievous",
                ru: "Ğ¿Ñ€Ğ¾Ğ²Ğ¾Ñ€Ğ½Ñ‹Ğ¹, Ğ¾Ğ·Ğ¾Ñ€Ğ½Ğ¾Ğ¹"
            },
            "é¸¡æ¯›": {
                pinyin: "jÄ« mÃ¡o",
                cnExplain: "é¸¡çš„ç¾½æ¯›",
                en: "chicken feather",
                ru: "ĞºÑƒÑ€Ğ¸Ğ½Ğ¾Ğµ Ğ¿ĞµÑ€Ğ¾"
            },
            "çº¿å›¢": {
                pinyin: "xiÃ n tuÃ¡n",
                cnExplain: "ç¼ ç»•æˆä¸€å›¢çš„çº¿",
                en: "ball of thread",
                ru: " ĞºĞ»ÑƒĞ±Ğ¾Ğº Ğ½Ğ¸Ñ‚Ğ¾Ğº"
            },
            "æ²¡å®Œæ²¡äº†": {
                pinyin: "mÃ©i wÃ¡n mÃ©i liÇo",
                cnExplain: "æ²¡æœ‰å®Œç»“ï¼ŒæŒç»­ä¸æ–­",
                en: "endless, without end",
                ru: "Ğ±ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ñ‹Ğ¹, Ğ½Ğµ Ğ¸Ğ¼ĞµÑÑ‰Ğ¸Ğ¹ ĞºĞ¾Ğ½Ñ†Ğ°"
            },
            "è·Ÿå¤´": {
                pinyin: "gÄ“n tou",
                cnExplain: "èº«ä½“å‘ä¸‹å¼¯æ›²ç„¶åç¿»è½¬çš„åŠ¨ä½œ",
                en: "somersault, flip",
                ru: "Ğ¿ĞµÑ€ĞµĞºĞ°Ñ‚, Ğ¿Ğ¾Ğ´ĞºĞ°Ñ‚"
            },
            "å“­": {
                pinyin: "kÅ«",
                cnExplain: "å› æ‚²ä¼¤æˆ–æ¿€åŠ¨è€Œæµæ³ª",
                en: "cry, weep",
                ru: "Ğ¿Ğ»Ğ°ĞºĞ°Ñ‚ÑŒ"
            },
            "èƒ†å­": {
                pinyin: "dÇn zi",
                cnExplain: "å‹‡æ°”ï¼Œèƒ†é‡",
                en: "courage, boldness",
                ru: "Ñ…Ñ€Ğ°Ğ±Ñ€Ğ¾ÑÑ‚ÑŒ, ÑĞ¼ĞµĞ»Ğ¾ÑÑ‚ÑŒ"
            },
            "èŠ±ç›†": {
                pinyin: "huÄ pÃ©n",
                cnExplain: "ç”¨æ¥ç§æ¤èŠ±è‰çš„å®¹å™¨",
                en: "flowerpot",
                ru: "Ñ†Ğ²ĞµÑ‚Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ Ğ³Ğ¾Ñ€ÑˆĞ¾Ğº"
            },
            "èŠ±æ": {
                pinyin: "huÄ zhÄ«",
                cnExplain: "å¼€ç€èŠ±çš„ææ¡",
                en: "flowering branch",
                ru: "Ñ†Ğ²ĞµÑ‚ÑƒÑ‰Ğ°Ñ Ğ²ĞµÑ‚ĞºĞ°"
            },
            "ç§‹åƒ": {
                pinyin: "qiÅ« qiÄn",
                cnExplain: "ä¸€ç§æ¸¸ä¹è®¾æ–½ï¼ŒæŒ‚åœ¨æ¶å­ä¸Šçš„åº§æ¤…ï¼Œå¯ä»¥å‰åæ‘†åŠ¨",
                en: "swing",
                ru: "ĞºĞ°Ñ‡ĞµĞ»Ğ¸"
            },
            "æå": {
                pinyin: "gÇo huÃ i",
                cnExplain: "ä½¿æŸåï¼Œå¼„å",
                en: "break, ruin",
                ru: "ÑĞ»Ğ¾Ğ¼Ğ°Ñ‚ÑŒ, Ğ¸ÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ‚ÑŒ"
            },
            "å¤©çœŸ": {
                pinyin: "tiÄn zhÄ“n",
                cnExplain: "å¿ƒåœ°å•çº¯ï¼Œæ€§æƒ…ç›´ç‡",
                en: "innocent, naive",
                ru: "Ğ½ĞµĞ²Ğ¸Ğ½Ğ½Ñ‹Ğ¹, Ğ½Ğ°Ğ¸Ğ²Ğ½Ñ‹Ğ¹"
            },
            "ç”Ÿæ°”": {
                pinyin: "shÄ“ng qÃ¬",
                cnExplain: "å› ä¸åˆå¿ƒæ„è€Œä¸æ„‰å¿«",
                en: "angry, annoyed",
                ru: "Ğ·Ğ»Ñ‹Ğ¹, Ñ€Ğ°Ğ·Ğ´Ñ€Ğ°Ğ¶ĞµĞ½Ğ½Ñ‹Ğ¹"
            },
            "æµåˆ©": {
                pinyin: "liÃº lÃ¬",
                cnExplain: "è¯´è¯ã€åšäº‹é¡ºç•…æ²¡æœ‰é˜»ç¢",
                en: "fluent; smooth",
                ru: "Ğ¿Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹; ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ñ‹Ğ¹"
            },
            "è¡¨æ¼”": {
                pinyin: "biÇo yÇn",
                cnExplain: "é€šè¿‡åŠ¨ä½œã€è¯­è¨€ç­‰å±•ç¤ºæŠ€è‰ºæˆ–æƒ…èŠ‚",
                en: "perform; show",
                ru: "Ğ²Ñ‹ÑÑ‚ÑƒĞ¿Ğ°Ñ‚ÑŒ; Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ"
            },
            "è§‚ä¼—": {
                pinyin: "guÄn zhÃ²ng",
                cnExplain: "è§‚çœ‹è¡¨æ¼”ã€æ¯”èµ›ç­‰çš„äºº",
                en: "audience; spectator",
                ru: "Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»Ğ¸; Ğ·Ñ€Ğ¸Ñ‚ĞµĞ»Ğ¸"
            },
            "æ´‹ç¬‘æ˜Ÿ": {
                pinyin: "yÃ¡ng xiÃ o xÄ«ng",
                cnExplain: "å¤–å›½çš„å–œå‰§æ¼”å‘˜ï¼ˆå› æ±‰è¯­æµåˆ©èƒ½è®©è§‚ä¼—å‘ç¬‘è€Œå¾—åï¼‰",
                en: "foreign comedian",
                ru: "Ğ¸Ğ½Ğ¾ÑÑ‚Ñ€Ğ°Ğ½Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ¼Ğ¸Ğº"
            },
            "ç ”ç©¶": {
                pinyin: "yÃ¡n jiÅ«",
                cnExplain: "æ¢æ±‚äº‹ç‰©çš„çœŸç›¸ã€æ€§è´¨ã€è§„å¾‹ç­‰",
                en: "study; research",
                ru: "Ğ¸Ğ·ÑƒÑ‡Ğ°Ñ‚ÑŒ; Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ÑŒ"
            },
            "ç”ŸåŠ¨": {
                pinyin: "shÄ“ng dÃ²ng",
                cnExplain: "å…·æœ‰æ´»åŠ›ï¼Œèƒ½ä½¿äººæ„ŸåŠ¨çš„",
                en: "vivid, lively",
                ru: "Ğ¶Ğ¸Ğ²Ğ¾Ğ¹, ÑÑ€ĞºĞ¸Ğ¹"
            },
            "æ‚å¿—": {
                pinyin: "zÃ¡ zhÃ¬",
                cnExplain: "å®šæœŸå‡ºç‰ˆçš„åˆŠç‰©",
                en: "magazine",
                ru: "Ğ¶ÑƒÑ€Ğ½Ğ°Ğ»"
            },
            "è¿åŠ¨": {
                pinyin: "yÃ¹n dÃ²ng",
                cnExplain: "ç‰©ä½“ä½ç½®ä¸æ–­å˜åŒ–çš„ç°è±¡ï¼›ä½“è‚²æ´»åŠ¨",
                en: "movement; sports",
                ru: "Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ; ÑĞ¿Ğ¾Ñ€Ñ‚"
            },
            "é˜…è¯»": {
                pinyin: "yuÃ¨ dÃº",
                cnExplain: "çœ‹ï¼ˆä¹¦æŠ¥ç­‰ï¼‰å¹¶é¢†ä¼šå…¶å†…å®¹",
                en: "read",
                ru: "Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ"
            },
            "ç®€æ´": {
                pinyin: "jiÇn jiÃ©",
                cnExplain: "ï¼ˆè¯´è¯ã€è¡Œæ–‡ç­‰ï¼‰ç®€æ˜æ‰¼è¦ï¼Œæ²¡æœ‰å¤šä½™çš„å†…å®¹",
                en: "concise, succinct",
                ru: "ĞºÑ€Ğ°Ñ‚ĞºĞ¸Ğ¹, Ğ»Ğ°ĞºĞ¾Ğ½Ğ¸Ñ‡Ğ½Ñ‹Ğ¹"
            },
            "æ·±åˆ»": {
                pinyin: "shÄ“n kÃ¨",
                cnExplain: "è¾¾åˆ°äº‹æƒ…æˆ–é—®é¢˜çš„æœ¬è´¨çš„",
                en: "profound, deep",
                ru: "Ğ³Ğ»ÑƒĞ±Ğ¾ĞºĞ¸Ğ¹, Ğ·Ğ½Ğ°Ñ‡Ğ¸Ğ¼Ñ‹Ğ¹"
            },
            "å°è±¡": {
                pinyin: "yÃ¬n xiÃ ng",
                cnExplain: "å®¢è§‚äº‹ç‰©åœ¨äººçš„å¤´è„‘é‡Œç•™ä¸‹çš„è¿¹è±¡",
                en: "impression",
                ru: "Ğ²Ğ¿ĞµÑ‡Ğ°Ñ‚Ğ»ĞµĞ½Ğ¸Ğµ"
            },
            "å¤æ€ª": {
                pinyin: "gÇ” guÃ i",
                cnExplain: "è·Ÿä¸€èˆ¬æƒ…å†µå¾ˆä¸ç›¸åŒï¼Œä½¿äººè§‰å¾—è¯§å¼‚çš„ï¼›ç¨€å¥‡ç½•è§çš„",
                en: "eccentric; strange",
                ru: "ÑĞºÑÑ†ĞµĞ½Ñ‚Ñ€Ğ¸Ñ‡Ğ½Ñ‹Ğ¹; ÑÑ‚Ñ€Ğ°Ğ½Ğ½Ñ‹Ğ¹"
            },
            "ä¹–": {
                pinyin: "guÄi",
                cnExplain: "ï¼ˆå°å­©ï¼‰å¬è¯ï¼›ä¸æ·˜æ°”",
                en: "well-behaved; obedient",
                ru: "Ğ¿Ğ¾ÑĞ»ÑƒÑˆĞ½Ñ‹Ğ¹; Ğ½Ğµ Ğ¾Ğ·Ğ¾Ñ€Ğ½Ğ¾Ğ¹"
            },
            "è´ª": {
                pinyin: "tÄn",
                cnExplain: "å¯¹æŸç§äº‹ç‰©çš„æ¬²æœ›è€ä¸æ»¡è¶³ï¼›æ±‚å¤š",
                en: "greedy; crave",
                ru: "Ğ¶Ğ°Ğ´Ğ½Ñ‹Ğ¹; Ğ¶Ğ°Ğ¶Ğ´Ğ°Ñ‚ÑŒ"
            },
            "è¹­": {
                pinyin: "cÃ¨ng",
                cnExplain: "æ‘©æ“¦",
                en: "rub against",
                ru: "Ñ‚Ñ€Ğ¾Ğ³Ğ°Ñ‚ÑŒ; Ğ¿Ñ€Ğ¾Ñ‚Ğ¸Ñ€Ğ°Ñ‚ÑŒ"
            },
            "å˜åŒ–å¤šç«¯": {
                pinyin: "biÃ n huÃ  duÅ duÄn",
                cnExplain: "å½¢å®¹å˜åŒ–æå¤šï¼Œä¹ŸæŒ‡å˜åŒ–å¾ˆå¤§",
                en: "varied and manifold; ever-changing",
                ru: "Ñ€Ğ°Ğ·Ğ½Ğ¾Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¹; Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾ Ğ¼ĞµĞ½ÑÑÑ‰Ğ¸Ğ¹ÑÑ"
            },
            "å¤©æ€§": {
                pinyin: "tiÄn xÃ¬ng",
                cnExplain: "äººå…ˆå¤©å…·æœ‰çš„å“è´¨æˆ–æ€§æƒ…",
                en: "innate nature; instinct",
                ru: "Ğ²Ñ€Ğ¾Ğ¶Ğ´Ñ‘Ğ½Ğ½Ğ°Ñ Ğ½Ğ°Ñ‚ÑƒÑ€Ğ°; Ğ¸Ğ½ÑÑ‚Ğ¸Ğ½ĞºÑ‚"
            },
            "ä¼‘æ¯": {
                pinyin: "xiÅ« xi",
                cnExplain: "æš‚æ—¶åœæ­¢å·¥ä½œã€å­¦ä¹ æˆ–æ´»åŠ¨ï¼Œä»¥æ¶ˆé™¤ç–²åŠ³ã€æ¢å¤ä½“åŠ›å’Œè„‘åŠ›",
                en: "rest",
                ru: "Ğ¾Ñ‚Ğ´Ñ‹Ñ…"
            }
        };

        // ä¼˜åŒ–é€‰è¯å¡«ç©ºçš„å¥å­æ¨¡æ¿ï¼Œç»‘å®šé€‚é…çš„è¯æ±‡ï¼ˆç¡®ä¿æœ‰æ­£ç¡®ç­”æ¡ˆï¼‰
        const sentenceTemplates = [
            { sentence: "è¿™åªå°çŒ«éå¸¸______ï¼Œå¤§å®¶éƒ½å¾ˆå–œæ¬¢å®ƒã€‚", words: ["é€—äººçˆ±", "å¤©çœŸ", "å¤æ€ª", "ä¹–"] },
            { sentence: "ä»–çš„ä¸­æ–‡è¯´å¾—å¾ˆ______ï¼Œå®Œå…¨å¬ä¸å‡ºæ˜¯å¤–å›½äººã€‚", words: ["æµåˆ©", "ç”ŸåŠ¨", "ç®€æ´", "æ·±åˆ»"] },
            { sentence: "å­©å­ä»¬åœ¨å…¬å›­é‡Œç©______ï¼Œç¬‘å£°ä¸æ–­ã€‚", words: ["ç§‹åƒ", "è·Ÿå¤´", "è¿åŠ¨", "è¡¨æ¼”"] },
            { sentence: "è¿™ä¸ªå­©å­å¤ª______äº†ï¼Œæ€»æ˜¯æŠŠå®¶é‡Œçš„ä¸œè¥¿å¼„ä¹±ã€‚", words: ["æ·˜æ°”", "è´ª", "å¤æ€ª", "å¤©çœŸ"] },
            { sentence: "ä»–çš„è„¾æ°”æœ‰ç‚¹______ï¼Œå¸¸å¸¸è®©äººæ‰æ‘¸ä¸é€ã€‚", words: ["å¤æ€ª", "æ·±åˆ»", "ç”ŸåŠ¨", "ç®€æ´"] },
            { sentence: "å°çŒ«ç©èµ·______æ¥ï¼Œæ€»æ˜¯ç©ä¸ª______ã€‚", words: ["çº¿å›¢", "é¸¡æ¯›", "æ²¡å®Œæ²¡äº†", "å˜åŒ–å¤šç«¯"] },
            { sentence: "å¥¹å› ä¸ºå¼„ä¸¢äº†ç©å…·ï¼Œååœ¨åœ°ä¸Š______äº†èµ·æ¥ã€‚", words: ["å“­", "ç”Ÿæ°”", "ä¼‘æ¯", "è¡¨æ¼”"] },
            { sentence: "å°æ˜çš„______å¾ˆå°ï¼Œè¿æ‰“é›·éƒ½å®³æ€•ã€‚", words: ["èƒ†å­", "å¤©æ€§", "å°è±¡", "è§‚ä¼—"] }
        ];

        // ç”Ÿæˆéšæœºæµ‹è¯•é¢˜
        function generateQuestions() {
            const container = document.getElementById('questions-container');
            container.innerHTML = '';
            document.getElementById('result').style.display = 'none';
            
            // éšæœºé€‰æ‹©10ä¸ªè¯æ±‡ï¼ˆç”¨äºæ•´ä½“æµ‹è¯•ï¼‰
            const vocabList = Object.keys(vocabData);
            const shuffledVocab = [...vocabList].sort(() => Math.random() - 0.5);
            const selectedVocab = shuffledVocab.slice(0, 10);
            
            // ä¸€ã€ç”Ÿæˆé€‰è¯å¡«ç©ºé¢˜ (3é¢˜)
            const fillQuestions = document.createElement('div');
            fillQuestions.className = 'question-section';
            fillQuestions.innerHTML = '<h2>ä¸€ã€é€‰è¯å¡«ç©º</h2>';
            
            // éšæœºé€‰3ä¸ªå¥å­æ¨¡æ¿
            const shuffledTemplates = [...sentenceTemplates].sort(() => Math.random() - 0.5).slice(0, 3);
            shuffledTemplates.forEach((template, index) => {
                const { sentence, words } = template;
                // éšæœºé€‰ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆï¼ˆä»æ¨¡æ¿ç»‘å®šçš„è¯æ±‡ä¸­é€‰ï¼‰
                const correctWord = words[Math.floor(Math.random() * words.length)];
                // ç”Ÿæˆå¹²æ‰°é€‰é¡¹ï¼šä»æ€»è¯æ±‡ä¸­é€‰ï¼Œç¡®ä¿åŒ…å«æ­£ç¡®ç­”æ¡ˆä¸”ä¸é‡å¤
                const options = [correctWord];
                while (options.length < 4) {
                    const randomOption = vocabList[Math.floor(Math.random() * vocabList.length)];
                    if (!options.includes(randomOption) && randomOption.length > 1) {
                        options.push(randomOption);
                    }
                }
                // æ‰“ä¹±é€‰é¡¹é¡ºåº
                options.sort(() => Math.random() - 0.5);
                
                // åˆ›å»ºé¢˜ç›®DOM
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = `<h3>1.${index + 1} ${sentence}</h3>`;
                
                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'options';
                
                options.forEach(option => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'option';
                    optionDiv.dataset.correct = option === correctWord;
                    optionDiv.textContent = option;
                    // ç‚¹å‡»é€‰ä¸­é€»è¾‘ï¼šæ·»åŠ /ç§»é™¤selectedç±»
                    optionDiv.addEventListener('click', function() {
                        // æ¸…é™¤åŒé¢˜å…¶ä»–é€‰é¡¹çš„é€‰ä¸­çŠ¶æ€
                        this.parentElement.querySelectorAll('.option').forEach(sib => {
                            sib.classList.remove('selected');
                        });
                        this.classList.add('selected');
                    });
                    optionsDiv.appendChild(optionDiv);
                });
                
                questionDiv.appendChild(optionsDiv);
                fillQuestions.appendChild(questionDiv);
            });
            container.appendChild(fillQuestions);
            
            // äºŒã€ç”Ÿæˆè¯ä¹‰è§£é‡Šé¢˜ (3é¢˜)
            const explainVocab = selectedVocab.slice(0, 3); // ä»é€‰ä¸­çš„10ä¸ªè¯æ±‡ä¸­é€‰3ä¸ª
            const explainQuestions = document.createElement('div');
            explainQuestions.className = 'question-section';
            explainQuestions.innerHTML = '<h2>äºŒã€è¯ä¹‰è§£é‡Š</h2>';
            
            explainVocab.forEach((word, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                questionDiv.innerHTML = `<h3>2.${index + 1} â€œ${word}â€çš„æ„æ€æ˜¯ä»€ä¹ˆï¼Ÿ</h3>`;
                
                // ç”Ÿæˆé€‰é¡¹ï¼š1ä¸ªæ­£ç¡®è§£é‡Šï¼Œ3ä¸ªå¹²æ‰°è§£é‡Š
                const options = [vocabData[word].cnExplain];
                while (options.length < 4) {
                    const randomWord = vocabList[Math.floor(Math.random() * vocabList.length)];
                    const randomExplain = vocabData[randomWord].cnExplain;
                    if (!options.includes(randomExplain)) {
                        options.push(randomExplain);
                    }
                }
                // æ‰“ä¹±é€‰é¡¹é¡ºåº
                options.sort(() => Math.random() - 0.5);
                
                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'options';
                
                options.forEach(option => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'option';
                    optionDiv.dataset.correct = option === vocabData[word].cnExplain;
                    optionDiv.textContent = option;
                    // ç‚¹å‡»é€‰ä¸­é€»è¾‘
                    optionDiv.addEventListener('click', function() {
                        this.parentElement.querySelectorAll('.option').forEach(sib => {
                            sib.classList.remove('selected');
                        });
                        this.classList.add('selected');
                    });
                    optionsDiv.appendChild(optionDiv);
                });
                
                questionDiv.appendChild(optionsDiv);
                explainQuestions.appendChild(questionDiv);
            });
            container.appendChild(explainQuestions);
            
            // ä¸‰ã€ç”Ÿæˆè¯-æ‹¼éŸ³è¿çº¿é¢˜ (4é¢˜)
            const pinyinVocab = selectedVocab.slice(3, 7); // é€‰4ä¸ªè¯æ±‡åšè¿çº¿
            const pinyinQuestion = document.createElement('div');
            pinyinQuestion.className = 'question-section';
            pinyinQuestion.innerHTML = '<h2>ä¸‰ã€è¿çº¿ï¼ˆè¯è¯­ä¸æ‹¼éŸ³åŒ¹é…ï¼‰</h2>';
            
            const matchingDiv = document.createElement('div');
            matchingDiv.className = 'matching-question'; // æ”¹ä¸ºè‹±æ–‡ç±»å
            
            // è¯è¯­ç»„
            const wordsDiv = document.createElement('div');
            wordsDiv.className = 'matching-group';
            wordsDiv.innerHTML = '<h3>è¯è¯­</h3>';
            const wordsContainer = document.createElement('div');
            wordsContainer.className = 'matching-area';
            
            pinyinVocab.forEach(word => {
                const wordDiv = document.createElement('div');
                wordDiv.className = 'matching-item';
                wordDiv.draggable = true;
                wordDiv.dataset.word = word;
                wordDiv.textContent = word;
                
                // æ‹–æ‹½äº‹ä»¶
                wordDiv.addEventListener('dragstart', function(e) {
                    e.dataTransfer.setData('text/plain', this.dataset.word);
                    setTimeout(() => this.classList.add('dragging'), 0);
                });
                wordDiv.addEventListener('dragend', function() {
                    this.classList.remove('dragging');
                });
                
                wordsContainer.appendChild(wordDiv);
            });
            wordsDiv.appendChild(wordsContainer);
            
            // æ‹¼éŸ³ç»„
            const pinyinsDiv = document.createElement('div');
            pinyinsDiv.className = 'matching-group';
            pinyinsDiv.innerHTML = '<h3>æ‹¼éŸ³</h3>';
            const pinyinsContainer = document.createElement('div');
            pinyinsContainer.className = 'matching-area';
            
            // æ‰“ä¹±æ‹¼éŸ³é¡ºåº
            const shuffledPinyinVocab = [...pinyinVocab].sort(() => Math.random() - 0.5);
            shuffledPinyinVocab.forEach(word => {
                const pinyinDiv = document.createElement('div');
                pinyinDiv.className = 'matching-item';
                pinyinDiv.dataset.pinyin = vocabData[word].pinyin;
                pinyinDiv.dataset.matchingWord = word;
                pinyinDiv.textContent = vocabData[word].pinyin;
                
                // æ‹–æ”¾åŒºåŸŸäº‹ä»¶
                pinyinDiv.addEventListener('dragover', function(e) {
                    e.preventDefault(); // å…è®¸æ‹–æ”¾
                });
                pinyinDiv.addEventListener('drop', function(e) {
                    e.preventDefault();
                    const draggedWord = e.dataTransfer.getData('text/plain');
                    // åŒ¹é…æ­£ç¡®åˆ™æ ‡è®°
                    if (draggedWord === this.dataset.matchingWord) {
                        this.classList.add('matched');
                        const draggedElement = document.querySelector(`.matching-item[data-word="${draggedWord}"]`);
                        if (draggedElement) {
                            draggedElement.classList.add('matched');
                            draggedElement.draggable = false; // ç¦æ­¢é‡å¤æ‹–æ‹½
                        }
                    }
                });
                
                pinyinsContainer.appendChild(pinyinDiv);
            });
            pinyinsDiv.appendChild(pinyinsContainer);
            
            matchingDiv.appendChild(wordsDiv);
            matchingDiv.appendChild(pinyinsDiv);
            pinyinQuestion.appendChild(matchingDiv);
            container.appendChild(pinyinQuestion);
        }

        // æäº¤ç­”æ¡ˆå¹¶è¯„åˆ†
        function submitAnswers() {
            let score = 0;
            const totalQuestions = 10; // 3å¡«ç©º + 3è§£é‡Š + 4è¿çº¿
            
            // 1. è¯„åˆ†é€‰è¯å¡«ç©ºé¢˜
            const fillOptions = document.querySelectorAll('.question-section:nth-child(1) .option.selected');
            fillOptions.forEach(option => {
                if (option.dataset.correct === 'true') {
                    score++;
                    option.classList.add('correct');
                } else {
                    option.classList.add('incorrect');
                    // æ˜¾ç¤ºæ­£ç¡®ç­”æ¡ˆ
                    const correctOption = option.parentElement.querySelector('.option[data-correct="true"]');
                    correctOption.classList.add('correct');
                }
            });
            
            // 2. è¯„åˆ†è¯ä¹‰è§£é‡Šé¢˜
            const explainOptions = document.querySelectorAll('.question-section:nth-child(2) .option.selected');
            explainOptions.forEach(option => {
                if (option.dataset.correct === 'true') {
                    score++;
                    option.classList.add('correct');
                } else {
                    option.classList.add('incorrect');
                    const correctOption = option.parentElement.querySelector('.option[data-correct="true"]');
                    correctOption.classList.add('correct');
                }
            });
            
            // 3. è¯„åˆ†è¿çº¿é¢˜ï¼ˆæ¯å¯¹æ­£ç¡®åŒ¹é…å¾—1åˆ†ï¼Œå…±4é¢˜ï¼‰
            const matchedWords = document.querySelectorAll('.matching-item.matched[data-word]');
            score += matchedWords.length; // æ¯ä¸ªæ­£ç¡®æ‹–æ‹½çš„è¯è¯­è®¡1åˆ†
            
            // æ˜¾ç¤ºç»“æœ
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';
            let feedback = '';
            if (score === totalQuestions) {
                feedback = 'å¤ªæ£’äº†ï¼Œå…¨éƒ¨æ­£ç¡®ï¼ğŸ‰';
            } else if (score >= 7) {
                feedback = 'ä¸é”™ï¼Œç»§ç»­åŠªåŠ›ï¼ğŸ‘';
            } else if (score >= 4) {
                feedback = 'è¿˜å¯ä»¥ï¼Œå†å¤ä¹ ä¸€ä¸‹å“¦ï¼ğŸ¤”';
            } else {
                feedback = 'åŠ æ²¹ï¼Œå¤šç»ƒä¹ ä¼šæ›´å¥½ï¼ğŸ’ª';
            }
            resultDiv.innerHTML = `
                <div class="score">å¾—åˆ†: ${score}/${totalQuestions}</div>
                <div class="feedback">${feedback}</div>
            `;
        }

        // é¡µé¢åŠ è½½æ—¶ç”Ÿæˆé¢˜ç›®
        window.onload = generateQuestions;
        
        // ç»‘å®šæŒ‰é’®äº‹ä»¶
        document.getElementById('submit-btn').addEventListener('click', submitAnswers);
        document.getElementById('refresh-btn').addEventListener('click', generateQuestions);
    </script>
</body>
</html>